"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_agent-sessions_utils_elapsed-time-util_ts-ui_packages_copilot-chat_utils_copilot--20809c"],{1574:(e,t,r)=>{r.d(t,{Y:()=>s,w:()=>n});let s={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled"};function n(e){switch(e){case s.InProgress:return"In progress";case s.Completed:return"Ready for review";case s.Failed:return"Failed";case s.Idle:return"Idle";case s.WaitingForUser:return"Waiting for user";case s.TimedOut:return"Timed out";case s.Cancelled:return"Cancelled";default:return"Unknown"}}},99723:(e,t,r)=>{r.d(t,{Y:()=>s});function s(e,t){let r=new Date(e).getTime(),s=Math.floor(((t&&"0001-01-01T00:00:00Z"!==t?new Date(t).getTime():Date.now())-r)/1e3),n=[{value:Math.floor(s/86400),label:"d"},{value:Math.floor(s%86400/3600),label:"h"},{value:Math.floor(s%3600/60),label:"m"},{value:s%60,label:"s"}].filter(e=>e.value>0);return 0===n.length?"0s":1===n.length?`${n[0]?.value??0}${n[0]?.label??""}`:n[1]?`${n[0]?.value}${n[0]?.label} ${n[1].value}${n[1].label??""}`:`${n[0]?.value??0}${n[0]?.label??""}`}},45260:(e,t,r)=>{r.d(t,{I:()=>o,j:()=>FetchCAPI401Error});var s=r(54187),n=r(22069),i=r(7799);let FetchCAPI401Error=class FetchCAPI401Error extends Error{constructor(e){super(e),this.name="FetchCAPI401Error"}};async function o({path:e,method:t="GET",streamingResponse:r=!1}){let o=new s.l,a=await o.getAuthToken();if(!a)throw Error("No token available");let l=await (0,n.p)({authToken:a,basePath:(0,i._$)().copilotApiUrl,method:t,path:e,streamingResponse:r});if(!l.ok){if(401===l.status)throw new FetchCAPI401Error("Unauthorized access - token may be invalid or expired");throw Error("Failed to fetch agent sessions")}return l}},54187:(e,t,r)=>{r.d(t,{l:()=>AgentSessionsTokenProvider});var s=r(879);let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends s.J{constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},92520:(e,t,r)=>{function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Y:()=>AuthToken});let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,r){s(this,"value",void 0),s(this,"expiration",void 0),s(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=r}}},879:(e,t,r)=>{r.d(t,{J:()=>CopilotAuthTokenProvider});var s=r(92520),n=r(85351),i=r(60039);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?s.Y.deserialize(JSON.parse(e)):null}removeLocalStorageAuthToken(){this.copilotLocalStorage.removeItem(this.storageKey)}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,i.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let r=s.Y.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(r),r}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",r="COPILOT_AUTH_TOKEN"){o(this,"tokenEndpoint",void 0),o(this,"storageKey",void 0),o(this,"ssoOrgIDs",void 0),o(this,"currentAuthTokenRequest",void 0),o(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,n.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=r,this.tokenEndpoint=t}}},99377:(e,t,r)=>{r.d(t,{C6:()=>n,UH:()=>l,Wp:()=>u,hs:()=>o,mF:()=>a,wh:()=>s,xP:()=>i});let s={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent"},n=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],i=["bing-search","codesearch","semantic-code-search","lexical-code-search","kb-search","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getalert","planskill","get-github-data","support-search","get-figma","codesearchagentskill","draft-issue","repository-metadata"],o={Experiments:"experiements",Prompt:"prompt",None:"none"},a={Unlicensed:"unlicensed",LicensedFull:"licensed_full",LicensedLimited:"licensed_limited"},l={IndividualFree:"free",IndividualPro:"pro",IndividualProPlus:"pro_plus",Business:"business",Enterprise:"enterprise"},u="NULL_MESSAGE"},1948:(e,t,r)=>{r.d(t,{Fn:()=>l,eS:()=>a});var s=r(74848),n=r(21728),i=r(96540);let o=(0,i.createContext)(void 0);function a(){let e=(0,i.useContext)(o);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function l(e){let t,r,a,l,c,h=(0,n.c)(7),{children:d}=e,[g,p]=(0,i.useState)(0);return h[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>p(u),a=()=>p(0),h[0]=r,h[1]=a):(r=h[0],a=h[1]),h[2]!==g?(l={numberOf401s:g,increment401s:r,reset401s:a},h[2]=g,h[3]=l):l=h[3],t=l,h[4]!==d||h[5]!==t?(c=(0,s.jsx)(o.Provider,{value:t,children:d}),h[4]=d,h[5]=t,h[6]=c):c=h[6],c}function u(e){return e+1}try{o.displayName||(o.displayName="ConsecutiveCAPI401sContext")}catch{}try{l.displayName||(l.displayName="ConsecutiveCAPI401sProvider")}catch{}},47360:(e,t,r)=>{r.d(t,{mE:()=>l,mV:()=>a});var s=r(74848),n=r(21728),i=r(96540);let o=(0,i.createContext)(void 0);function a(){let e=(0,i.useContext)(o);if(!e)throw Error("usePullContext must be used within a PullContextProvider");return e}function l(e){let t,r,i,a=(0,n.c)(5),{pull:l,children:u}=e;return a[0]!==l?(r={pull:l},a[0]=l,a[1]=r):r=a[1],t=r,a[2]!==u||a[3]!==t?(i=(0,s.jsx)(o.Provider,{value:t,children:u}),a[2]=u,a[3]=t,a[4]=i):i=a[4],i}try{o.displayName||(o.displayName="PullContext")}catch{}try{l.displayName||(l.displayName="PullContextProvider")}catch{}},91768:(e,t,r)=>{r.d(t,{b:()=>l});var s=r(97286),n=r(45260),i=r(1948),o=r(54187),a=r(96540);function l(...e){let t=(0,s.I)(...e),{numberOf401s:r,increment401s:u,reset401s:c}=(0,i.eS)(),{isError:h,isLoading:d,error:g}=t;return(0,a.useEffect)(()=>{h&&g instanceof n.j?u():h||d?r>5&&(new o.l().removeLocalStorageAuthToken(),c()):c()},[h,d,g,u,c,r]),t}},96316:(e,t,r)=>{r.d(t,{t:()=>u});var s=r(21728),n=r(91768),i=r(1574),o=r(88795),a=r(47360),l=r(45260);function u(e){let t,r,i,u,d=(0,s.c)(13),{initialData:g,sessionsPollingInterval:p}=e,v=(0,o.t)(),{pull:f}=(0,a.mV)(),{id:m}=f;return d[0]!==m||d[1]!==v.name||d[2]!==v.ownerLogin?(t=["agent-sessions",v.ownerLogin,v.name,m],d[0]=m,d[1]=v.name,d[2]=v.ownerLogin,d[3]=t):t=d[3],d[4]!==m?(r=async()=>{let e=await (0,l.I)({path:`/agents/sessions/resource/pull/${m}`});return(await e.json()).sessions.sort(h)},d[4]=m,d[5]=r):r=d[5],d[6]!==p?(i=e=>{let t=e.state.data;return t?t.some(c)?p:10*p:p},d[6]=p,d[7]=i):i=d[7],d[8]!==g||d[9]!==t||d[10]!==r||d[11]!==i?(u={queryKey:t,queryFn:r,initialData:g,refetchInterval:i},d[8]=g,d[9]=t,d[10]=r,d[11]=i,d[12]=u):u=d[12],(0,n.b)(u)}function c(e){return e.state===i.Y.InProgress||e.state===i.Y.Idle||e.state===i.Y.WaitingForUser}function h(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}},88795:(e,t,r)=>{r.d(t,{d:()=>a,t:()=>l});var s=r(74848),n=r(21728),i=r(96540);let o=i.createContext({});function a(e){let t,r=(0,n.c)(3),{repository:i,children:a}=e;return r[0]!==a||r[1]!==i?(t=(0,s.jsxs)(o.Provider,{value:i,children:[" ",a," "]}),r[0]=a,r[1]=i,r[2]=t):t=r[2],t}function l(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentRepositoryContext")}catch{}try{a.displayName||(a.displayName="CurrentRepositoryProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_agent-sessions_utils_elapsed-time-util_ts-ui_packages_copilot-chat_utils_copilot--20809c-a0b210b5f1eb.js.map